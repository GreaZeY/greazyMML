(this["webpackJsonpmy-movie-list"]=this["webpackJsonpmy-movie-list"]||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),s=a(21),r=a.n(s),i=(a(77),a(14)),o=a(11),l=a(5),u=(a(78),a(56)),j=a.n(u),d=a(6),b=a(8),p=a.n(b),O=a(15),f="LOGIN_REQUEST",m="LOGIN_SUCCESS",h="LOGIN_FAIL",v="REGISTER_USER_REQUEST",x="REGISTER_USER_SUCCESS",g="REGISTER_USER_FAIL",E="LOAD_USER_REQUEST",y="LOAD_USER_SUCCESS",S="LOAD_USER_FAIL",w="LOGOUT_SUCCESS",_="LOGOUT_FAIL",N="UPDATE_PROFILE_REQUEST",R="UPDATE_PROFILE_SUCCESS",C="UPDATE_PROFILE_RESET",T="UPDATE_PROFILE_FAIL",U="UPDATE_PASSWORD_REQUEST",A="UPDATE_PASSWORD_SUCCESS",L="UPDATE_PASSWORD_RESET",P="UPDATE_PASSWORD_FAIL",F="FORGOT_PASSWORD_REQUEST",D="FORGOT_PASSWORD_SUCCESS",I="FORGOT_PASSWORD_FAIL",k="RESET_PASSWORD_REQUEST",q="RESET_PASSWORD_SUCCESS",M="RESET_PASSWORD_FAIL",V="UPDATE_USER_REQUEST",Q="UPDATE_USER_SUCCESS",B="UPDATE_USER_RESET",G="UPDATE_USER_FAIL",H="DELETE_USER_REQUEST",W="DELETE_USER_SUCCESS",J="DELETE_USER_FAIL",z="DELETE_USER_RESET",$="CLEAR_ERRORS",Y=a(17),K=a.n(Y),X=function(){return function(){var e=Object(O.a)(p.a.mark((function e(t){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E}),e.next=4,K.a.get("/api/v1/me");case 4:a=e.sent,c=a.data,t({type:y,payload:c.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:S,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(){return function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("/api/v1/logout");case 3:t({type:w}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t({type:_,payload:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},ee=function(){return function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:$});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},te=a(10),ae=a(57),ce=a.n(ae),ne=a(58),se=a.n(ne),re=a(59),ie=a.n(re),oe="DISCOVER_REQUEST",le="DISCOVER_SUCCESS",ue="DISCOVER_FAIL",je="POPULAR_REQUEST",de="POPULAR_SUCCESS",be="POPULAR_FAIL",pe="FAVORITE_REQUEST",Oe="FAVORITE_SUCCESS",fe="FAVORITE_FAIL",me="ADD_FAVORITE_REQUEST",he="ADD_FAVORITE_SUCCESS",ve="ADD_FAVORITE_FAIL",xe="REMOVE_FAVORITE_REQUEST",ge="REMOVE_FAVORITE_SUCCESS",Ee="REMOVE_FAVORITE_FAIL",ye="LATEST_REQUEST",Se="LATEST_SUCCESS",we="LATEST_FAIL",_e="SEARCH_REQUEST",Ne="SEARCH_SUCCESS",Re="SEARCH_FAIL",Ce="MOVIE_DETAILS_REQUEST",Te="MOVIE_DETAILS_SUCCESS",Ue="MOVIE_DETAILS_FAIL",Ae="CLEAR_ERRORS",Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var c=Object(O.a)(p.a.mark((function c(n){var s,r,i,o;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n({type:oe}),s="/api/v1/".concat(t),r={headers:{"Content-Type":"application/json"}},c.next=6,K.a.post(s,{pageNumber:e,query:a},r);case 6:i=c.sent,o=i.data,n({type:le,payload:o}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),n({type:ue,payload:c.t0.response});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()},Pe=function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var c,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:pe}),c={headers:{"Content-Type":"application/json"}},"/api/v1/getfavlist",t.next=6,K.a.post("/api/v1/getfavlist",{userId:e},c);case 6:n=t.sent,s=n.data,a({type:Oe,payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:fe,payload:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Fe=function(){return function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Ae});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},De=a(1),Ie=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(o.f)(),r=Object(te.d)(),u=Object(d.b)(),b=Object(d.c)((function(e){return e.user})),p=b.isAuthenticated,O=b.user;Object(n.useEffect)((function(){u(X())}),[s,u]),Object(n.useEffect)((function(){!0===p&&u(Pe(O._id))}),[O,p,u]);return Object(De.jsxs)("div",{className:"header",children:[Object(De.jsxs)("div",{className:"left",children:[Object(De.jsx)(i.b,{to:"/",children:Object(De.jsx)("img",{draggable:"false",src:"/images/logo.png",alt:"My Movie List"})}),Object(De.jsxs)("form",{className:"search",onSubmit:function(e){e.preventDefault(),a.trim()&&s.push("/movies/".concat(a))},children:[Object(De.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return c(e.target.value)}}),Object(De.jsx)("button",{type:"submit",children:Object(De.jsx)(j.a,{})})]})]}),Object(De.jsxs)("div",{className:"navlinks",children:[Object(De.jsx)(i.b,{to:"/popular",children:"Popular"}),Object(De.jsx)(i.b,{to:"/latest",children:"Latest"}),p?Object(De.jsx)(i.b,{to:"/login?redirect=favorites",children:"Favorites"}):"",p?Object(De.jsxs)("div",{className:"profile",children:[Object(De.jsx)("div",{className:"avatar",children:Object(De.jsx)(i.b,{to:"/profile",children:Object(De.jsx)("img",{src:O.avatar.url,alt:O.name})})}),Object(De.jsxs)("div",{className:"accMenu",children:[Object(De.jsxs)(i.b,{to:"/profile",children:[Object(De.jsx)(ce.a,{}),"Your Profile"]}),Object(De.jsxs)(i.b,{to:"/favorites",children:[Object(De.jsx)(se.a,{}),"Favourites"]}),Object(De.jsx)("a",{children:Object(De.jsxs)("button",{onClick:function(){u(Z()),r.success("Logged out Successfully")},children:[Object(De.jsx)(ie.a,{}),"Logout"]})})]})]}):Object(De.jsx)(i.b,{to:"/login",children:Object(De.jsx)("button",{children:"Sign In"})})]})]})},ke=a(12),qe=(a(109),function(){return Object(De.jsx)("div",{class:"loading",children:Object(De.jsx)("svg",{viewBox:"0 0 80 80",children:Object(De.jsx)("circle",{id:"test",cx:"40",cy:"40",r:"32"})})})}),Me=(a(110),function(e){var t=e.movie,a=e.favtab,c=Object(d.c)((function(e){return e.user})),s=c.isAuthenticated,r=c.user,u=Object(d.c)((function(e){return e.UserFavList})),j=u.loading,b=u.favList,f=Object(d.b)(),m=Object(o.f)(),h=Object(te.d)(),v=Object(n.useState)(!1),x=Object(l.a)(v,2),g=x[0],E=x[1],y="https://www.themoviedb.org/t/p/w300_and_h450_bestv2".concat(t.poster_path),S=function(e){var t,a;!1===s?m.push("/login?redirect=favorites"):(f((t=r._id,a=e,function(){var e=Object(O.a)(p.a.mark((function e(c){var n,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:me}),n={headers:{"Content-Type":"application/json"}},e.next=6,K.a.post("/api/v1/addtofavorites",{userId:t,movieId:a},n);case 6:s=e.sent,r=s.data,c({type:he,payload:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c({type:ve,payload:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),h.success("Added to favorites"))},w=function(e){var t,a;E(!1),f((t=r._id,a=e,function(){var e=Object(O.a)(p.a.mark((function e(c){var n,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:xe}),n={headers:{"Content-Type":"application/json"}},console.log(t,a),e.next=7,K.a.post("/api/v1/remfromfav",{userId:t,movieId:a},n);case 7:s=e.sent,r=s.data,c({type:ge,payload:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c({type:Ee,payload:e.t0.response.data.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())),h.success("Removed from favorites")};return Object(n.useEffect)((function(){!0===s&&f(Pe(r._id))}),[r,s,f]),Object(n.useEffect)((function(){!0===s&&b&&b.UserFavList.favList.map((function(e){e.id===t.id&&E(!0)}))}),[b]),Object(De.jsx)(n.Fragment,{children:j?"":!a||g?Object(De.jsxs)("div",{className:"cardContainer",children:[Object(De.jsx)(i.b,{to:"/".concat(t.id,"/details/").concat(t.title),children:Object(De.jsxs)("div",{className:"movieCard",children:[Object(De.jsx)("div",{children:Object(De.jsx)("img",{dragable:"false",src:y,alt:t.title})}),Object(De.jsxs)("div",{className:"info",children:[Object(De.jsx)("h1",{children:t.title}),Object(De.jsx)("span",{children:t.vote_average})]}),Object(De.jsx)("p",{children:t.release_date})]})}),!0===g?Object(De.jsx)("button",{onClick:function(){return w(t.id)},style:{background:"red"},className:"addToFav",children:"Remove"}):Object(De.jsx)("button",{onClick:function(){return S(t.id)},className:"addToFav",children:"+Add to Favorites"})]},t.id):""})}),Ve=(a(111),a(60)),Qe=function(e){var t=e.title;return Object(De.jsx)(Ve.a,{children:Object(De.jsx)("title",{children:t})})},Be=function(e){var t=e.match,a=Object(te.d)(),c=Object(d.b)(),s=Object(n.useState)([]),r=Object(l.a)(s,2),i=r[0],u=r[1],j=Object(n.useState)(1),b=Object(l.a)(j,2),p=b[0],O=b[1],f=Object(o.g)();Object(n.useEffect)((function(){u([]),O(1)}),[f]);var m=Object(d.c)((function(e){return e.movies})),h=m.loading,v=m.error,x=m.movies,g=m.totalPages;return Object(n.useEffect)((function(){v&&(a.error(v),c(Fe())),c(Le(p,"discover"))}),[c,v,a,p,t.params.query,f]),Object(n.useEffect)((function(){u((function(e){if(x)return[].concat(Object(ke.a)(e),Object(ke.a)(x))}))}),[x]),p<=g&&(window.onscroll=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&O(p+1)}),Object(n.useEffect)((function(){u([]),O(1)}),[t.params.query]),Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Capital Movies: Discover"}),Object(De.jsx)("img",{className:"banner",src:"/images/banner.jpg",alt:"banner"}),Object(De.jsx)("div",{className:"imageSpace"}),Object(De.jsxs)("div",{className:"imgbackdrop",children:[Object(De.jsx)("h1",{children:"What have you watched?"}),"Create your personalized list from tens of thousands of titles on the world\u2019s largest movie database."]}),Object(De.jsxs)("div",{className:"discover",children:[Object(De.jsx)("h1",{children:"Discover"}),Object(De.jsx)("div",{className:"movieContainer",children:i&&i.map((function(e){return Object(De.jsx)(Me,{movie:e})}))})]}),Object(De.jsx)("div",{className:"loader",children:h?Object(De.jsx)(qe,{}):""})]})},Ge=function(e){var t=e.match,a=e.history,c=Object(te.d)(),s=Object(d.b)(),r=Object(n.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(n.useState)(1),b=Object(l.a)(j,2),p=b[0],O=b[1],f=Object(d.c)((function(e){return e.movies})),m=f.loading,h=f.error,v=f.movies,x=f.totalPages;return Object(n.useEffect)((function(){h&&(c.error(h),s(Fe())),s(Le(p,"latest"))}),[s,h,c,p,t.params.query]),Object(n.useEffect)((function(){u((function(e){if(v)return[].concat(Object(ke.a)(e),Object(ke.a)(v))}))}),[v]),p<=x&&(window.onscroll=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&(O(p+1),console.log("hit"))}),Object(n.useEffect)((function(){u([]),O(1)}),[t.params.query,a]),Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Latests"}),Object(De.jsxs)("div",{className:"discover",children:[Object(De.jsx)("h1",{children:"Latests"}),Object(De.jsx)("div",{className:"movieContainer",children:o.map((function(e){return Object(De.jsx)(Me,{movie:e})}))})]}),Object(De.jsx)("div",{className:"loader",children:m?Object(De.jsx)(qe,{}):""})]})},He=function(e){var t=e.match,a=e.history,c=Object(te.d)(),s=Object(d.b)(),r=Object(n.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(n.useState)(1),b=Object(l.a)(j,2),p=b[0],O=b[1],f=Object(d.c)((function(e){return e.movies})),m=f.loading,h=f.error,v=f.movies,x=f.totalPages;return Object(n.useEffect)((function(){h&&(c.error(h),s(Fe())),s(Le(p,"popular"))}),[s,h,c,p,t.params.query]),Object(n.useEffect)((function(){u((function(e){if(v)return[].concat(Object(ke.a)(e),Object(ke.a)(v))}))}),[v]),p<=x&&(window.onscroll=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&(O(p+1),console.log("hit"))}),Object(n.useEffect)((function(){u([]),O(1)}),[t.params.query,a]),Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Popular"}),Object(De.jsxs)("div",{className:"discover",children:[Object(De.jsx)("h1",{children:"Popular"}),Object(De.jsx)("div",{className:"movieContainer",children:o.map((function(e){return Object(De.jsx)(Me,{movie:e})}))})]}),Object(De.jsx)("div",{className:"loader",children:m?Object(De.jsx)(qe,{}):""})]})},We=(a(112),function(e){var t=e.match,a=(e.history,Object(d.b)()),c=Object(te.d)(),s=Object(d.c)((function(e){return e.movieDetails})),r=s.movie,i=s.loading,o=s.error;Object(n.useEffect)((function(){var e;o&&(c.error(o),a(Fe())),console.log("mid",t.params.id),a((e=t.params.id,function(){var t=Object(O.a)(p.a.mark((function t(a){var c,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ce}),c={headers:{"Content-Type":"application/json"}},t.next=6,K.a.post("/api/v1/moviedetails",{movieId:e},c);case 6:n=t.sent,s=n.data,a({type:Te,payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ue,payload:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()))}),[a,t.params.id,c,o]);var l=r?"https://www.themoviedb.org/t/p/w600_and_h900_bestv2".concat(r.poster_path):"";return Object(De.jsx)(n.Fragment,{children:i?Object(De.jsx)("div",{className:"LoadingBackdrop",children:Object(De.jsx)(qe,{})}):Object(De.jsx)(n.Fragment,{children:Object(De.jsxs)("div",{className:"detailsContainer",children:[Object(De.jsx)("div",{className:"left",children:Object(De.jsx)("img",{src:l,alt:r.title})}),Object(De.jsxs)("div",{className:"right",children:[Object(De.jsx)("h1",{children:r.title}),Object(De.jsxs)("p",{className:"rating",children:["Status: ",r.status]}),Object(De.jsx)("p",{className:"rating",children:r.release_date}),Object(De.jsxs)("p",{className:"vote",children:[r.vote_average," Rating "," (".concat(r.vote_count," votes)")]}),Object(De.jsx)("div",{className:"genres",children:r.genres&&r.genres.map((function(e){return Object(De.jsxs)("p",{children:["\u2022 ",e.name]})}))}),Object(De.jsx)("p",{className:"tagline",children:r.tagline&&r.tagline}),Object(De.jsx)("h2",{children:"Synopsis"}),Object(De.jsx)("p",{children:r.overview}),Object(De.jsxs)("div",{className:"Sinfo",children:[Object(De.jsxs)("div",{children:[Object(De.jsx)("h3",{children:"Budget"}),Object(De.jsxs)("p",{children:[" $",parseInt(r.budget/1e6)," M"]})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h3",{children:"Revenue"}),Object(De.jsxs)("p",{children:[" $",parseInt(r.revenue/1e6)," M"]})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h3",{children:"Original Language"}),Object(De.jsx)("p",{style:{textTransform:"uppercase"},children:r.original_language})]})]}),Object(De.jsx)("div",{className:"homepage",children:Object(De.jsx)("a",{href:r.homepage,target:"blank",children:"Visit Official Site"})})]})]})})})}),Je=function(e){var t=e.match,a=Object(te.d)(),c=Object(d.b)(),s=Object(n.useState)([]),r=Object(l.a)(s,2),i=r[0],o=r[1],u=Object(n.useState)(1),j=Object(l.a)(u,2),b=j[0],p=j[1],O=Object(d.c)((function(e){return e.movies})),f=O.loading,m=O.error,h=O.movies,v=O.totalPages;return Object(n.useEffect)((function(){m&&(a.error(m),c(Fe())),c(Le(b,"search",t.params.query))}),[c,m,a,b,t.params.query]),Object(n.useEffect)((function(){o((function(e){if(h)return[].concat(Object(ke.a)(e),Object(ke.a)(h))}))}),[h,t.params.query]),Object(n.useEffect)((function(){o([]),p(1)}),[t.params.query]),b<=v&&(window.onscroll=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&p(b+1)}),Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Search results for ".concat(t.params.query)}),Object(De.jsx)("div",{className:"movieContainer",children:0===i.length?Object(De.jsx)("h1",{style:{fontSize:"3vmax",color:"rgb(0, 255, 191)"},children:f?"":"No Results found for ".concat(t.params.query," :(")}):i.map((function(e){return Object(De.jsx)(Me,{movie:e})}))}),Object(De.jsx)("div",{className:"loader",children:f?Object(De.jsx)(qe,{}):""})]})},ze=a(16),$e=(a(113),a(34)),Ye=a.n($e),Ke=a(27),Xe=a.n(Ke),Ze=a(64),et=a.n(Ze),tt=a(63),at=a.n(tt),ct=(a(114),function(){var e=Object(d.b)(),t=Object(te.d)(),a=Object(d.c)((function(e){return e.forgotPassword})),c=a.error,s=a.message,r=a.loading,i=Object(n.useState)(""),o=Object(l.a)(i,2),u=o[0],j=o[1];return Object(n.useEffect)((function(){c&&(t.error(c),e(ee())),s&&t.success(s)}),[e,c,t,s]),Object(De.jsx)(n.Fragment,{children:r?Object(De.jsx)("div",{className:"LoadingBackdrop",children:Object(De.jsx)(qe,{})}):Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Forgot Password"}),Object(De.jsxs)("div",{className:"forgotPasswordBox",children:[Object(De.jsx)("h2",{className:"forgotPasswordHeading",children:"Forgot Password"}),Object(De.jsxs)("form",{className:"forgotPasswordForm",onSubmit:function(t){t.preventDefault();var a=new FormData;a.set("email",u),e(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var c,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:F}),c={headers:{"Content-Type":"application/json"}},t.next=5,K.a.post("/api/v1/password/forgot",e,c);case 5:n=t.sent,s=n.data,a({type:D,payload:s.message}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:I,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[Object(De.jsxs)("div",{className:"forgotPasswordEmail",children:[Object(De.jsx)(Ye.a,{}),Object(De.jsx)("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:u,onChange:function(e){return j(e.target.value)}})]}),Object(De.jsx)("input",{type:"submit",value:"Send",className:"forgotPasswordBtn"})]})]})]})})}),nt=function(e){var t=e.history,a=e.location,s=Object(d.b)(),r=Object(te.d)();Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var i=Object(d.c)((function(e){return e.user})),o=i.error,u=i.loading,j=i.isAuthenticated,b=Object(n.useRef)(null),E=Object(n.useRef)(null),y=Object(n.useRef)(null),S=Object(n.useState)(""),w=Object(l.a)(S,2),_=w[0],N=w[1],R=Object(n.useState)(""),C=Object(l.a)(R,2),T=C[0],U=C[1],A=Object(n.useState)({name:"",email:"",password:"",mobileNo:""}),L=Object(l.a)(A,2),P=L[0],F=L[1],D=P.name,I=P.email,k=P.password,q=P.mobileNo,M=Object(n.useState)(void 0),V=Object(l.a)(M,2),Q=V[0],B=V[1],G=Object(n.useState)("/images/Profile.png"),H=Object(l.a)(G,2),W=H[0],J=H[1],z=Object(n.useState)(!1),$=Object(l.a)(z,2),Y=$[0],X=$[1],Z=function(e){if("avatar"===e.target.name){var t=new FileReader;t.onload=function(){2===t.readyState&&t.result&&(J(t.result),B(t.result))},e.target.files[0]&&t.readAsDataURL(e.target.files[0])}else F(Object(c.a)(Object(c.a)({},P),{},Object(ze.a)({},e.target.name,e.target.value)))},ae=a.search?a.search.split("=")[1]:null;Object(n.useEffect)((function(){o&&("Duplicate email Entered."===o?r.error("A user is already registered with this email"):r.error(o),s(ee())),j&&(ae?t.push(ae):window.history.back())}),[s,o,r,t,j,ae]);var ce=function(e,t){"login"===t&&(y.current.classList.add("shiftToNeutral"),y.current.classList.remove("shiftToRight"),document.title="Login",E.current.classList.remove("shiftToNeutralForm"),b.current.classList.remove("shiftToLeft")),"register"===t&&(y.current.classList.add("shiftToRight"),y.current.classList.remove("shiftToNeutral"),document.title="Register",E.current.classList.add("shiftToNeutralForm"),b.current.classList.add("shiftToLeft"))};return Object(De.jsx)(n.Fragment,{children:u?Object(De.jsx)("div",{className:"LoadingBackdrop",children:Object(De.jsx)(qe,{})}):Object(De.jsx)(n.Fragment,{children:Object(De.jsx)("div",{className:"LoginSignUpContainer",children:Y?Object(De.jsx)(ct,{}):Object(De.jsxs)("div",{className:"LoginSignUpBox",children:[Object(De.jsx)(Qe,{title:"Login"}),Object(De.jsxs)("div",{children:[Object(De.jsxs)("div",{className:"login_signUp_toggle",children:[Object(De.jsx)("p",{onClick:function(e){return ce(0,"login")},children:"LOGIN"}),Object(De.jsx)("p",{onClick:function(e){return ce(0,"register")},children:"REGISTER"})]}),Object(De.jsx)("button",{ref:y})]}),Object(De.jsxs)("form",{className:"loginForm",ref:b,onSubmit:function(e){e.preventDefault(),s(function(e,t){return function(){var a=Object(O.a)(p.a.mark((function a(c){var n,s,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:f}),n={headers:{"Content-Type":"application/json"}},a.next=5,K.a.post("/api/v1/login",{email:e,password:t},n);case 5:s=a.sent,r=s.data,c({type:m,payload:r.user}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),c({type:h,payload:a.t0.response.data.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(_,T))},children:[Object(De.jsxs)("div",{className:"loginEmail",children:[Object(De.jsx)(Ye.a,{}),Object(De.jsx)("input",{type:"email",placeholder:"Email",required:!0,value:_,onChange:function(e){return N(e.target.value)}})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)(Xe.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"Password",required:!0,value:T,onChange:function(e){return U(e.target.value)}})]}),Object(De.jsx)("p",{className:"forgot",onClick:function(){return X(!0)},children:"Forgot Password?"}),Object(De.jsx)("input",{type:"submit",value:"Login",className:"loginBtn"})]}),Object(De.jsxs)("form",{className:"signUpForm",ref:E,encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var t,a=new FormData;a.set("name",D),a.set("email",I),a.set("mobileNo",q),a.set("password",k),Q&&a.set("avatar",Q),s((t=a,function(){var e=Object(O.a)(p.a.mark((function e(a){var c,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:v}),c={headers:{"Content-Type":"multipart/form-data"}},e.next=5,K.a.post("/api/v1/register",t,c);case 5:n=e.sent,s=n.data,a({type:x,payload:s.user}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:g,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(De.jsxs)("div",{className:"signUpName",children:[Object(De.jsx)(at.a,{}),Object(De.jsx)("input",{type:"text",placeholder:"Name",required:!0,name:"name",value:D,onChange:Z})]}),Object(De.jsxs)("div",{className:"signUpEmail",children:[Object(De.jsx)(Ye.a,{}),Object(De.jsx)("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:I,onChange:Z})]}),Object(De.jsxs)("div",{className:"signUpMobileNo",children:[Object(De.jsx)(et.a,{}),Object(De.jsx)("input",{type:"Number",placeholder:"Mobile no.",required:!0,name:"mobileNo",value:q,onChange:Z})]}),Object(De.jsxs)("div",{className:"signUpPassword",children:[Object(De.jsx)(Xe.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"Password",required:!0,name:"password",value:k,onChange:Z})]}),Object(De.jsxs)("div",{id:"registerImage",children:[Object(De.jsx)("img",{src:W,alt:"Avatar Preview"}),Object(De.jsx)("input",{type:"file",name:"avatar",accept:"image/*",onChange:Z})]}),Object(De.jsx)("input",{type:"submit",value:"Register",className:"signUpBtn"})]})]})})})})},st=a(70),rt=["component"],it=function(e){var t=e.component,a=Object(st.a)(e,rt),s=Object(d.c)((function(e){return e.user})),r=s.loading,i=s.isAuthenticated;return Object(De.jsx)(n.Fragment,{children:!1===r&&Object(De.jsx)(o.b,Object(c.a)(Object(c.a)({},a),{},{render:function(e){return i?Object(De.jsx)(t,Object(c.a)({},e)):Object(De.jsx)(o.a,{to:"/login"})}}))})},ot=(a(116),a(117),a(66)),lt=a.n(ot),ut=a(39),jt=a.n(ut),dt=a(65),bt=a.n(dt),pt=function(e){var t=e.history,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)(!1),u=Object(l.a)(o,2),j=u[0],b=u[1],f=Object(n.useState)(""),m=Object(l.a)(f,2),h=m[0],v=m[1],x=Object(n.useState)(""),g=Object(l.a)(x,2),E=g[0],y=g[1],S=Object(n.useState)(),w=Object(l.a)(S,2),_=w[0],L=w[1],F=Object(n.useState)(""),D=Object(l.a)(F,2),I=D[0],k=D[1],q=Object(n.useState)(""),M=Object(l.a)(q,2),V=M[0],Q=M[1],B=Object(n.useState)("/Profile.png"),G=Object(l.a)(B,2),H=G[0],W=G[1],J=Object(n.useState)(""),z=Object(l.a)(J,2),$=z[0],Y=z[1],ae=Object(n.useState)(""),ce=Object(l.a)(ae,2),ne=ce[0],se=ce[1],re=Object(n.useState)(""),ie=Object(l.a)(re,2),oe=ie[0],le=ie[1],ue=Object(d.c)((function(e){return e.user})),je=ue.user,de=ue.loading,be=ue.isAuthenticated,pe=Object(d.c)((function(e){return e.profile})),Oe=pe.error,fe=pe.isUpdated,me=pe.loading,he=Object(d.b)(),ve=Object(te.d)();Object(n.useEffect)((function(){be||t.push("/login")}),[t,be]),Object(n.useEffect)((function(){je&&(v(je.name),y(je.email),W(je.avatar.url),k(je.mobileNo)),Oe&&(ve.error(Oe),he(ee())),fe&&(ve.success(V),he(X()),he({type:C}))}),[he,Oe,ve,t,je,fe,V]);return Object(De.jsx)(n.Fragment,{children:de|me?Object(De.jsx)("div",{className:"LoadingBackdrop",children:Object(De.jsx)(qe,{})}):Object(De.jsx)("div",{children:je?Object(De.jsxs)("div",{className:"profileContainer",children:[Object(De.jsx)(Qe,{title:"".concat(je.name,"'s Profile")}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h1",{children:"My Profile"}),s?Object(De.jsxs)("div",{class:"profile-pic",children:[Object(De.jsx)("label",{class:"-label",for:"file",children:Object(De.jsx)(bt.a,{})}),Object(De.jsx)("input",{id:"file",type:"file",onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(W(t.result),L(t.result))},t.readAsDataURL(e.target.files[0])}}),Object(De.jsx)("img",{src:H,alt:je.name})]}):Object(De.jsx)("img",{src:je.avatar?je.avatar.url:"",alt:je.name}),s?Object(De.jsx)("button",{onClick:function(){if(h===je.name&&E===je.email&&I===je.mobileNo&&H===je.avatar.url)ve.error("Nothing has changed.");else{var e=new FormData;e.set("name",h),e.set("email",E),e.set("avatar",_),e.set("mobileNo",I),he((t=e,function(){var e=Object(O.a)(p.a.mark((function e(a){var c,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:N}),c={headers:{"Content-Type":"multipart/form-data"}},e.next=5,K.a.put("/api/v1/me/update",t,c);case 5:n=e.sent,s=n.data,a({type:R,payload:s.success}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:T,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),Q("Profile Updated Successfully")}var t},className:"update",style:{background:"rgb(34, 223, 175)"},children:"Update"}):j?"":Object(De.jsx)("button",{onClick:function(){r(!0)},className:"update",children:"Edit Profile"}),Object(De.jsx)("button",{onClick:s|j?function(){r(!1),b(!1)}:function(){he(Z()),ve.success("Logged out Successfully")},className:"logout",children:s|j?"Cancel":"Logout"})]}),Object(De.jsxs)("div",{children:[Object(De.jsxs)("div",{children:[Object(De.jsx)("h4",{children:"Full Name"}),s?Object(De.jsx)("input",{className:"updateInfo",type:"text",placeholder:"Name",required:!0,name:"name",value:h,onChange:function(e){return v(e.target.value)}}):Object(De.jsx)("p",{children:je.name})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h4",{children:"Email"}),s?Object(De.jsx)("input",{className:"updateInfo",type:"email",placeholder:"Email",required:!0,name:"email",value:E,onChange:function(e){return y(e.target.value)}}):Object(De.jsx)("p",{children:je.email})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h4",{children:"Mobile No."}),s?Object(De.jsx)("input",{className:"updateInfo",type:"Number",placeholder:"Mobile No.",required:!0,name:"mobileNo",value:I,onChange:function(e){return k(e.target.value)}}):Object(De.jsx)("p",{children:je.mobileNo?je.mobileNo:"-"})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("h4",{children:"Joined On"}),Object(De.jsx)("p",{children:String(je.createdAt).substr(0,10)})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)(i.b,{to:"/favorites",children:"My Favorites"}),j?Object(De.jsxs)("form",{className:"updatePasswordForm",onSubmit:function(e){e.preventDefault();var t,a=new FormData;a.set("oldPassword",$),a.set("newPassword",ne),a.set("confirmPassword",oe),he((t=a,function(){var e=Object(O.a)(p.a.mark((function e(a){var c,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:U}),c={headers:{"Content-Type":"application/json"}},e.next=5,K.a.put("/api/v1/password/update",t,c);case 5:n=e.sent,s=n.data,a({type:A,payload:s.success}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:P,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),Q("Password updated successfully")},children:[Object(De.jsxs)("div",{className:"loginPassword",children:[Object(De.jsx)(lt.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"Old Password",required:!0,value:$,onChange:function(e){return Y(e.target.value)}})]}),Object(De.jsxs)("div",{className:"loginPassword",children:[Object(De.jsx)(Xe.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"New Password",required:!0,value:ne,onChange:function(e){return se(e.target.value)}})]}),Object(De.jsxs)("div",{className:"loginPassword",children:[Object(De.jsx)(jt.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"Confirm Password",required:!0,value:oe,onChange:function(e){return le(e.target.value)}})]}),Object(De.jsx)("button",{className:"update",style:{margin:0,marginTop:"1vmax",width:"100%",background:"rgb(34, 223, 175)"},type:"submit",children:"Update Password"})]}):"",j||s?"":Object(De.jsx)("button",{onClick:function(){return b(!0)},className:"update",style:{width:"100%",background:"rgb(68, 68, 68)",margin:0,marginTop:"1.2vmax"},children:"Change Password"})]})]})]}):""})})},Ot=(a(118),function(e){var t=e.history,a=e.match,c=Object(d.b)(),s=Object(te.d)(),r=Object(d.c)((function(e){return e.forgotPassword})),i=r.error,o=r.success,u=r.loading,j=Object(n.useState)(""),b=Object(l.a)(j,2),f=b[0],m=b[1],h=Object(n.useState)(""),v=Object(l.a)(h,2),x=v[0],g=v[1];return Object(n.useEffect)((function(){i&&(s.error(i),c(ee())),o&&(s.success("Password Updated Successfully"),c(X()),t.push("/"))}),[c,i,s,t,o]),Object(De.jsx)(n.Fragment,{children:u?Object(De.jsx)("div",{className:"LoadingBackdrop",children:Object(De.jsx)(qe,{})}):Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Change Password"}),Object(De.jsx)("div",{className:"resetPasswordContainer",children:Object(De.jsxs)("div",{className:"resetPasswordBox",children:[Object(De.jsx)("h2",{className:"resetPasswordHeading",children:"Update Password"}),Object(De.jsxs)("form",{className:"resetPasswordForm",onSubmit:function(e){e.preventDefault();var t,n,s=new FormData;s.set("password",f),s.set("confirmPassword",x),c((t=a.params.token,n=s,function(){var e=Object(O.a)(p.a.mark((function e(a){var c,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:k}),c={headers:{"Content-Type":"application/json"}},e.next=5,K.a.put("/api/v1/password/reset/".concat(t),n,c);case 5:s=e.sent,r=s.data,a({type:q,payload:r.success}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:M,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(De.jsxs)("div",{className:"loginPassword",children:[Object(De.jsx)(Xe.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"New Password",required:!0,value:f,onChange:function(e){return m(e.target.value)}})]}),Object(De.jsxs)("div",{className:"loginPassword",children:[Object(De.jsx)(jt.a,{}),Object(De.jsx)("input",{type:"password",placeholder:"Confirm Password",required:!0,value:x,onChange:function(e){return g(e.target.value)}})]}),Object(De.jsx)("input",{type:"submit",value:"Update",className:"resetPasswordBtn"})]})]})})]})})}),ft=function(){var e=Object(d.c)((function(e){return e.user})),t=e.user,a=e.isAuthenticated,c=Object(d.c)((function(e){return e.UserFavList})),s=c.favList,r=c.loading,i=Object(d.b)();return Object(n.useEffect)((function(){!0===a&&i(Pe(t._id))}),[t,a,i]),Object(De.jsxs)(n.Fragment,{children:[Object(De.jsx)(Qe,{title:"Favorites"}),Object(De.jsxs)("div",{className:"discover",children:[Object(De.jsx)("h1",{children:"Favorites"}),Object(De.jsxs)("div",{className:"movieContainer",children:[!1===r?s&&s.UserFavList.favList.map((function(e){return Object(De.jsx)(Me,{movie:e,favtab:!0})})):""," "]})]})]})};var mt=function(){return Object(De.jsxs)(i.a,{children:[Object(De.jsx)(Ie,{}),Object(De.jsx)(o.b,{exact:!0,path:"/",component:Be}),Object(De.jsx)(o.b,{exact:!0,path:"/latest",component:Ge}),Object(De.jsx)(o.b,{exact:!0,path:"/popular",component:He}),Object(De.jsx)(o.b,{exact:!0,path:"/:id/details/:title",component:We}),Object(De.jsx)(o.b,{exact:!0,path:"/movies/:query",component:Je}),Object(De.jsx)(o.b,{exact:!0,path:"/login",component:nt}),Object(De.jsx)(it,{exact:!0,path:"/profile",component:pt}),Object(De.jsx)(o.b,{exact:!0,path:"/password/reset/:token",component:Ot}),Object(De.jsx)(it,{exact:!0,path:"/favorites",component:ft})]})},ht=a(35),vt=a(68),xt=a(67),gt=Object(ht.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:case je:case _e:case ye:return{loading:!0,movies:[]};case le:case de:case Ne:case Se:return{loading:!1,movies:t.payload.results,totalPages:t.payload.total_pages,moviesCount:t.payload.total_results};case ue:case be:case Re:case we:return{loading:!1,error:t.payload};case Ae:return Object(c.a)(Object(c.a)({},e),{},{errors:null});default:return e}},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movie:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return Object(c.a)({loading:!0},e);case Te:return{loading:!1,movie:t.payload};case Ue:return{loading:!1,error:t.payload};case Ae:return Object(c.a)(Object(c.a)({},e),{},{errors:null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:case v:case E:return{loading:!0,isAuthenticated:!1};case m:case x:case y:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,isAuthenticated:!0,user:t.payload});case w:return{loading:!1,user:null,isAuthenticated:!1};case h:case g:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,isAuthenticated:!1,user:null,error:t.payload});case S:return{loading:!1,isAuthenticated:!1,user:null,error:t.payload};case _:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,error:t.payload});case $:return Object(c.a)(Object(c.a)({},e),{},{error:null});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:case U:case V:case H:return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case R:case A:case Q:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,isUpdated:t.payload});case W:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,isDeleted:t.payload.success,message:t.payload.message});case T:case P:case G:case J:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,error:t.payload});case C:case L:case B:return Object(c.a)(Object(c.a)({},e),{},{isUpdated:!1});case z:return Object(c.a)(Object(c.a)({},e),{},{isDeleted:!1});case $:return Object(c.a)(Object(c.a)({},e),{},{error:null});default:return e}},forgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:case k:return Object(c.a)(Object(c.a)({},e),{},{loading:!0,error:null});case D:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,message:t.payload});case q:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,success:t.payload});case I:case M:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,error:t.payload});case $:return Object(c.a)(Object(c.a)({},e),{},{error:null});default:return e}},UserFavList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movie:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:case me:case xe:return Object(c.a)({loading:!0},e);case Oe:case he:case ge:return{loading:!1,favList:t.payload};case fe:case ve:case Ee:return{loading:!1,error:t.payload};case Ae:return Object(c.a)(Object(c.a)({},e),{},{errors:null});default:return e}}}),Et=[vt.a],yt=Object(ht.createStore)(gt,{},Object(xt.composeWithDevTools)(ht.applyMiddleware.apply(void 0,Et))),St=a(69),wt={timeout:5e3,position:te.b.BOTTOM_CENTER,transition:te.c.SCALE};r.a.render(Object(De.jsx)(d.a,{store:yt,children:Object(De.jsx)(te.a,Object(c.a)(Object(c.a)({template:St.a},wt),{},{children:Object(De.jsx)(mt,{})}))}),document.getElementById("root"))},77:function(e,t,a){},78:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.cff389b8.chunk.js.map